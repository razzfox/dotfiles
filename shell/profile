# Login environment (exports all variables for subsequent shells to use)
# This file sources the shell settings at the end (if interactive)

# Detect OS (kernel) and ID (distro)
test -z "$OS" && export OS="$(uname | tr '[:upper:]' '[:lower:]')"
case "$OS" in
linux)
  source /etc/os-release
  test "$ID" = "archarm" && export ID="arch"
  ;;
darwin)
  ID="osx"
  test -z "$HOME" && export HOME=/Users/$(whoami)
  ;;
Windows_NT|CYGWIN_NT-*)
  export OS="windows"
  export ID="cygwin"
  ;;
*)
  echo "Your platform '$(uname)' can not be identified." >/dev/stderr
esac


# Dotfiles
test -z "$DOTFILES" && export DOTFILES="$HOME/dotfiles" # default location


# Path
test -z "$BIN_HOME" && test -d $HOME/bin && export BIN_HOME="$HOME/bin" && export PATH="$BIN_HOME:$PATH"
test -z "$GEM_HOME" && export GEM_HOME="$HOME/.gem" && export PATH="$(ruby -e 'puts Gem.user_dir')/bin:$PATH"
test -z "$GOPATH" && export GOPATH="$HOME/.gocode" && PATH="$GOPATH/bin:$PATH"
export PATH


# Other vars
export EDITOR="$(which nano)" # single line-based editor (the distinction is no longer recognized)
export VISUAL="$EDITOR" #  milti-line (whole screen) editor
export PAGER="$(which less)" # view text output in scrolling pages instead of textdump

export LC_ALL="C"


# Source shell functions and settings (if interactive)
source $DOTFILES/shell/$(basename $SHELL)rc
